{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, normalizeStyle as _normalizeStyle, withCtx as _withCtx, createVNode as _createVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, normalizeClass as _normalizeClass, createBlock as _createBlock, createTextVNode as _createTextVNode, createCommentVNode as _createCommentVNode, withKeys as _withKeys } from \"vue\";\nconst _hoisted_1 = {\n  class: \"home-container\"\n};\nconst _hoisted_2 = {\n  style: {\n    \"text-align\": \"center\"\n  }\n};\nconst _hoisted_3 = {\n  style: {\n    \"margin-top\": \"10px\",\n    \"font-size\": \"20px\",\n    \"font-weight\": \"bold\"\n  }\n};\nconst _hoisted_4 = {\n  style: {\n    \"color\": \"#888\"\n  }\n};\nconst _hoisted_5 = {\n  style: {\n    \"display\": \"flex\",\n    \"align-items\": \"center\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"font-size\": \"16px\"\n  }\n};\nconst _hoisted_7 = {\n  style: {\n    \"font-size\": \"32px\",\n    \"font-weight\": \"bold\"\n  }\n};\nconst _hoisted_8 = {\n  ref: \"deptChart\",\n  class: \"dept-chart\"\n};\nconst _hoisted_9 = {\n  ref: \"genderChart\",\n  class: \"gender-chart\"\n};\nconst _hoisted_10 = {\n  key: 0,\n  style: {\n    \"margin\": \"10px 0 16px 0\",\n    \"color\": \"#666\"\n  }\n};\nconst _hoisted_11 = {\n  style: {\n    \"margin\": \"0 0 8px 0\",\n    \"color\": \"#333\"\n  }\n};\nconst _hoisted_12 = {\n  style: {\n    \"margin\": \"0\",\n    \"white-space\": \"pre-line\"\n  }\n};\nconst _hoisted_13 = {\n  style: {\n    \"font-size\": \"12px\",\n    \"color\": \"#888\",\n    \"text-align\": \"right\",\n    \"margin-top\": \"8px\"\n  }\n};\nconst _hoisted_14 = {\n  key: 1,\n  style: {\n    \"margin\": \"10px 0 16px 0\",\n    \"color\": \"#888\"\n  }\n};\nconst _hoisted_15 = {\n  key: 0,\n  class: \"ai-answer\",\n  style: {\n    \"margin-top\": \"16px\",\n    \"white-space\": \"pre-line\"\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_card = _resolveComponent(\"el-card\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_avatar = _resolveComponent(\"el-avatar\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _component_el_divider = _resolveComponent(\"el-divider\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createElementVNode(\"div\", _hoisted_1, [_createVNode(_component_el_row, {\n    gutter: 20,\n    style: {\n      \"margin-bottom\": \"20px\"\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_col, {\n      span: 16\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_card, {\n        class: \"welcome-card\",\n        style: _normalizeStyle({\n          background: $setup.welcomeCardBackground\n        })\n      }, {\n        default: _withCtx(() => _cache[1] || (_cache[1] = [_createElementVNode(\"h2\", null, \"欢迎来到员工管理系统\", -1 /* HOISTED */), _createElementVNode(\"p\", null, \"本系统支持员工信息管理、部门管理、考勤统计、个人中心等功能。\", -1 /* HOISTED */)])),\n        _: 1 /* STABLE */,\n        __: [1]\n      }, 8 /* PROPS */, [\"style\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_col, {\n      span: 8\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_card, {\n        class: \"avatar-card\",\n        style: _normalizeStyle({\n          background: $setup.avatarCardBackground\n        })\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_2, [_createVNode(_component_el_avatar, {\n          size: 80,\n          src: $setup.userInfo.avatar || '默认头像地址'\n        }, null, 8 /* PROPS */, [\"src\"]), _createElementVNode(\"div\", _hoisted_3, _toDisplayString($setup.userInfo.name), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_4, _toDisplayString($setup.positionMap[$setup.userInfo.job]), 1 /* TEXT */)])]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"style\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_row, {\n    gutter: 20,\n    style: {\n      \"margin-bottom\": \"20px\"\n    }\n  }, {\n    default: _withCtx(() => [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.statItems, item => {\n      return _openBlock(), _createBlock(_component_el_col, {\n        span: 6,\n        key: item.label\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_card, {\n          style: _normalizeStyle({\n            background: item.color1 ? `linear-gradient(135deg,${item.color1},${item.color2})` : $setup.statCardBackground\n          })\n        }, {\n          default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"i\", {\n            class: _normalizeClass(item.icon),\n            style: {\n              \"font-size\": \"36px\",\n              \"margin-right\": \"16px\"\n            }\n          }, null, 2 /* CLASS */), _createElementVNode(\"div\", null, [_createElementVNode(\"div\", _hoisted_6, _toDisplayString(item.label), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_7, _toDisplayString(item.value), 1 /* TEXT */)])])]),\n          _: 2 /* DYNAMIC */\n        }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"style\"])]),\n        _: 2 /* DYNAMIC */\n      }, 1024 /* DYNAMIC_SLOTS */);\n    }), 128 /* KEYED_FRAGMENT */))]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_row, {\n    gutter: 20,\n    style: {\n      \"margin-bottom\": \"20px\"\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_col, {\n      span: 12\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_card, {\n        style: _normalizeStyle({\n          background: $setup.chartCardBackground\n        })\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_8, null, 512 /* NEED_PATCH */)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"style\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_col, {\n      span: 12\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_card, {\n        style: _normalizeStyle({\n          background: $setup.chartCardBackground\n        })\n      }, {\n        default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_9, null, 512 /* NEED_PATCH */)]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"style\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createVNode(_component_el_row, {\n    gutter: 20\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_col, {\n      span: 12\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_card, {\n        style: _normalizeStyle({\n          background: $setup.latestEmpCardBackground\n        })\n      }, {\n        default: _withCtx(() => [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n          style: {\n            \"font-weight\": \"bold\"\n          }\n        }, \"最新入职员工\", -1 /* HOISTED */)), _createElementVNode(\"ul\", null, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.latestEmps.slice(0, 2), emp => {\n          return _openBlock(), _createElementBlock(\"li\", {\n            key: emp.id,\n            style: {\n              \"display\": \"flex\",\n              \"align-items\": \"center\",\n              \"margin-bottom\": \"8px\"\n            }\n          }, [_createVNode(_component_el_avatar, {\n            src: emp.image,\n            size: 32,\n            style: {\n              \"margin-right\": \"8px\"\n            }\n          }, null, 8 /* PROPS */, [\"src\"]), _createElementVNode(\"span\", null, _toDisplayString(emp.name) + \"（\" + _toDisplayString(emp.deptName) + \"，\" + _toDisplayString($setup.formatDate(emp.entryDate)) + \"）\", 1 /* TEXT */)]);\n        }), 128 /* KEYED_FRAGMENT */))]), _createVNode(_component_el_divider), _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: $setup.goToAddEmp\n        }, {\n          default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"新增员工\")])),\n          _: 1 /* STABLE */,\n          __: [2]\n        }), _createVNode(_component_el_button, {\n          onClick: $setup.goToDept,\n          style: {\n            \"margin-left\": \"8px\"\n          }\n        }, {\n          default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"部门管理\")])),\n          _: 1 /* STABLE */,\n          __: [3]\n        })]),\n        _: 1 /* STABLE */,\n        __: [4]\n      }, 8 /* PROPS */, [\"style\"])]),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_col, {\n      span: 12\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_card, {\n        style: _normalizeStyle({\n          background: $setup.announcementCardBackground\n        })\n      }, {\n        default: _withCtx(() => [_cache[8] || (_cache[8] = _createElementVNode(\"div\", {\n          style: {\n            \"font-weight\": \"bold\"\n          }\n        }, \"公告栏\", -1 /* HOISTED */)), $setup.latestAnnouncement ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"h4\", _hoisted_11, _toDisplayString($setup.latestAnnouncement.title), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_12, _toDisplayString($setup.latestAnnouncement.content), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_13, \" 发布时间: \" + _toDisplayString($setup.formatDate($setup.latestAnnouncement.createTime)), 1 /* TEXT */)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_14, \"暂无公告。\")), _createVNode(_component_el_divider), _cache[9] || (_cache[9] = _createElementVNode(\"div\", {\n          style: {\n            \"font-weight\": \"bold\",\n            \"margin-bottom\": \"8px\"\n          }\n        }, \"快捷操作\", -1 /* HOISTED */)), _createVNode(_component_el_button, {\n          type: \"primary\",\n          size: \"small\",\n          onClick: $setup.goToAttendance\n        }, {\n          default: _withCtx(() => _cache[5] || (_cache[5] = [_createTextVNode(\"考勤打卡\")])),\n          _: 1 /* STABLE */,\n          __: [5]\n        }), _createVNode(_component_el_button, {\n          size: \"small\",\n          onClick: $setup.goToProfile,\n          style: {\n            \"margin-left\": \"8px\"\n          }\n        }, {\n          default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"个人信息\")])),\n          _: 1 /* STABLE */,\n          __: [6]\n        }), _createVNode(_component_el_button, {\n          size: \"small\",\n          onClick: $setup.goToLeave,\n          style: {\n            \"margin-left\": \"8px\"\n          }\n        }, {\n          default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"请假申请\")])),\n          _: 1 /* STABLE */,\n          __: [7]\n        })]),\n        _: 1 /* STABLE */,\n        __: [8, 9]\n      }, 8 /* PROPS */, [\"style\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  })]), _createVNode(_component_el_card, {\n    class: \"ai-card\",\n    style: _normalizeStyle([{\n      \"margin-top\": \"24px\"\n    }, {\n      background: $setup.aiCardBackground\n    }])\n  }, {\n    default: _withCtx(() => [_cache[12] || (_cache[12] = _createElementVNode(\"div\", {\n      style: {\n        \"font-weight\": \"bold\",\n        \"font-size\": \"18px\",\n        \"margin-bottom\": \"8px\"\n      }\n    }, \"AI智能考勤分析\", -1 /* HOISTED */)), _createVNode(_component_el_input, {\n      modelValue: $setup.aiInput,\n      \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.aiInput = $event),\n      placeholder: \"请输入你想让AI分析的问题，如：本月考勤异常有哪些？\",\n      onKeyup: _withKeys($setup.handleAskAI, [\"enter\"]),\n      clearable: \"\",\n      style: {\n        \"width\": \"80%\",\n        \"margin-right\": \"12px\"\n      }\n    }, null, 8 /* PROPS */, [\"modelValue\"]), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $setup.handleAskAI,\n      loading: $setup.aiLoading\n    }, {\n      default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\"发送\")])),\n      _: 1 /* STABLE */,\n      __: [10]\n    }, 8 /* PROPS */, [\"loading\"]), $setup.aiAnswer ? (_openBlock(), _createElementBlock(\"div\", _hoisted_15, [_createVNode(_component_el_divider, null, {\n      default: _withCtx(() => _cache[11] || (_cache[11] = [_createTextVNode(\"AI分析结果\")])),\n      _: 1 /* STABLE */,\n      __: [11]\n    }), _createTextVNode(\" \" + _toDisplayString($setup.aiAnswer), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]),\n    _: 1 /* STABLE */,\n    __: [12]\n  }, 8 /* PROPS */, [\"style\"])], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["class","style","ref","key","_createElementBlock","_Fragment","_createElementVNode","_hoisted_1","_createVNode","_component_el_row","gutter","default","_withCtx","_component_el_col","span","_component_el_card","_normalizeStyle","background","$setup","welcomeCardBackground","_cache","_","__","avatarCardBackground","_hoisted_2","_component_el_avatar","size","src","userInfo","avatar","_hoisted_3","_toDisplayString","name","_hoisted_4","positionMap","job","_renderList","statItems","item","_createBlock","label","color1","color2","statCardBackground","_hoisted_5","_normalizeClass","icon","_hoisted_6","_hoisted_7","value","chartCardBackground","_hoisted_8","_hoisted_9","latestEmpCardBackground","latestEmps","slice","emp","id","image","deptName","formatDate","entryDate","_component_el_divider","_component_el_button","type","onClick","goToAddEmp","_createTextVNode","goToDept","announcementCardBackground","latestAnnouncement","_hoisted_10","_hoisted_11","title","_hoisted_12","content","_hoisted_13","createTime","_hoisted_14","goToAttendance","goToProfile","goToLeave","aiCardBackground","_component_el_input","modelValue","aiInput","$event","placeholder","onKeyup","_withKeys","handleAskAI","clearable","loading","aiLoading","aiAnswer","_hoisted_15","_createCommentVNode"],"sources":["D:\\web_code\\zxyf\\test_vue\\src\\components\\Home.vue"],"sourcesContent":["/* eslint-disable */\n<template>\n  <div class=\"home-container\">\n    <el-row :gutter=\"20\" style=\"margin-bottom: 20px;\">\n      <el-col :span=\"16\">\n        <el-card class=\"welcome-card\" :style=\"{ background: welcomeCardBackground }\">\n          <h2>欢迎来到员工管理系统</h2>\n          <p>本系统支持员工信息管理、部门管理、考勤统计、个人中心等功能。</p>\n        </el-card>\n      </el-col>\n      <el-col :span=\"8\">\n        <el-card class=\"avatar-card\" :style=\"{ background: avatarCardBackground }\">\n          <div style=\"text-align:center;\">\n            <el-avatar :size=\"80\" :src=\"userInfo.avatar || '默认头像地址'\" />\n            <div style=\"margin-top:10px;font-size:20px;font-weight:bold;\">{{ userInfo.name }}</div>\n            <div style=\"color: #888;\">{{ positionMap[userInfo.job] }}</div>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n    <el-row :gutter=\"20\" style=\"margin-bottom: 20px;\">\n      <el-col :span=\"6\" v-for=\"item in statItems\" :key=\"item.label\">\n        <el-card :style=\"{ background: item.color1 ? `linear-gradient(135deg,${item.color1},${item.color2})` : statCardBackground }\">\n          <div style=\"display:flex;align-items:center;\">\n            <i :class=\"item.icon\" style=\"font-size:36px;margin-right:16px;\"></i>\n            <div>\n              <div style=\"font-size:16px;\">{{ item.label }}</div>\n              <div style=\"font-size:32px;font-weight:bold;\">{{ item.value }}</div>\n            </div>\n          </div>\n        </el-card>\n      </el-col>\n    </el-row>\n    <el-row :gutter=\"20\" style=\"margin-bottom: 20px;\">\n      <el-col :span=\"12\">\n        <el-card :style=\"{ background: chartCardBackground }\">\n          <div ref=\"deptChart\" class=\"dept-chart\"></div>\n        </el-card>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-card :style=\"{ background: chartCardBackground }\">\n          <div ref=\"genderChart\" class=\"gender-chart\"></div>\n        </el-card>\n      </el-col>\n    </el-row>\n    <el-row :gutter=\"20\">\n      <el-col :span=\"12\">\n        <el-card :style=\"{ background: latestEmpCardBackground }\">\n          <div style=\"font-weight:bold;\">最新入职员工</div>\n          <ul>\n            <li v-for=\"emp in latestEmps.slice(0, 2)\" :key=\"emp.id\" style=\"display:flex;align-items:center;margin-bottom:8px;\">\n              <el-avatar :src=\"emp.image\" :size=\"32\" style=\"margin-right:8px;\" />\n              <span>{{ emp.name }}（{{ emp.deptName }}，{{ formatDate(emp.entryDate) }}）</span>\n            </li>\n          </ul>\n          <el-divider />\n          <el-button type=\"primary\" @click=\"goToAddEmp\">新增员工</el-button>\n          <el-button @click=\"goToDept\" style=\"margin-left:8px;\">部门管理</el-button>\n        </el-card>\n      </el-col>\n      <el-col :span=\"12\">\n        <el-card :style=\"{ background: announcementCardBackground }\">\n          <div style=\"font-weight:bold;\">公告栏</div>\n          <div v-if=\"latestAnnouncement\" style=\"margin: 10px 0 16px 0; color: #666;\">\n            <h4 style=\"margin: 0 0 8px 0; color: #333;\">{{ latestAnnouncement.title }}</h4>\n            <p style=\"margin: 0; white-space: pre-line;\">{{ latestAnnouncement.content }}</p>\n            <div style=\"font-size: 12px; color: #888; text-align: right; margin-top: 8px;\">\n              发布时间: {{ formatDate(latestAnnouncement.createTime) }}\n            </div>\n          </div>\n          <div v-else style=\"margin: 10px 0 16px 0; color: #888;\">暂无公告。</div>\n          <el-divider />\n          <div style=\"font-weight:bold; margin-bottom: 8px;\">快捷操作</div>\n          <el-button type=\"primary\" size=\"small\" @click=\"goToAttendance\">考勤打卡</el-button>\n          <el-button size=\"small\" @click=\"goToProfile\" style=\"margin-left:8px;\">个人信息</el-button>\n          <el-button size=\"small\" @click=\"goToLeave\" style=\"margin-left:8px;\">请假申请</el-button>\n        </el-card>\n      </el-col>\n    </el-row>\n  </div>\n  <el-card class=\"ai-card\" style=\"margin-top: 24px;\" :style=\"{ background: aiCardBackground }\">\n      <div style=\"font-weight:bold;font-size:18px;margin-bottom:8px;\">AI智能考勤分析</div>\n      <el-input\n        v-model=\"aiInput\"\n        placeholder=\"请输入你想让AI分析的问题，如：本月考勤异常有哪些？\"\n        @keyup.enter=\"handleAskAI\"\n        clearable\n        style=\"width: 80%; margin-right: 12px;\"\n      />\n      <el-button type=\"primary\" @click=\"handleAskAI\" :loading=\"aiLoading\">发送</el-button>\n      <div v-if=\"aiAnswer\" class=\"ai-answer\" style=\"margin-top:16px;white-space:pre-line;\">\n        <el-divider>AI分析结果</el-divider>\n        {{ aiAnswer }}\n      </div>\n    </el-card>\n</template>\n\n<script setup>\nimport { ref, onMounted, computed } from 'vue'\nimport * as echarts from 'echarts'\nimport axios from 'axios'\nimport dayjs from 'dayjs'\nimport { useRouter } from 'vue-router'\nimport { analyzeAttendance } from '@/api/ai'\n\n// 函数：生成随机浅色或柔和的渐变色\nfunction getRandomSoftGradient() {\n  const hue = Math.random() * 360; // 0-360色相\n  const s1 = Math.random() * 30 + 70; // 70-100饱和度\n  const l1 = Math.random() * 10 + 90; // 90-100亮度 (非常浅)\n  const s2 = Math.random() * 30 + 60; // 60-90饱和度\n  const l2 = Math.random() * 10 + 85; // 85-95亮度 (稍深一点)\n\n  const color1 = `hsl(${hue}, ${s1}%, ${l1}%)`;\n  const color2 = `hsl(${(hue + 60) % 360}, ${s2}%, ${l2}%)`; // 稍微不同的色相\n  const angle = Math.random() * 360;\n  return `linear-gradient(${angle}deg, ${color1}, ${color2})`;\n}\n\n// 为不同的卡片定义背景 ref\nconst welcomeCardBackground = ref(getRandomSoftGradient());\nconst avatarCardBackground = ref(getRandomSoftGradient());\nconst statCardBackground = ref(getRandomSoftGradient());\nconst chartCardBackground = ref(getRandomSoftGradient());\nconst latestEmpCardBackground = ref(getRandomSoftGradient());\nconst announcementCardBackground = ref(getRandomSoftGradient());\nconst aiCardBackground = ref(getRandomSoftGradient());\n\nconst router = useRouter()\n\nconst stats = ref({\n  empCount: 0,\n  deptCount: 0,\n  maleCount: 0,\n  femaleCount: 0\n})\nconst latestEmps = ref([])\nconst deptCounts = ref([])\nconst genderRatio = ref([])\n\nconst deptChart = ref(null)\nconst genderChart = ref(null)\n\nconst userInfo = ref({\n  name: '',\n  avatar: '',\n  job: ''\n})\n\nconst positionMap = { 1: '经理', 2: '总监', 3: '主管', 4: '组长', 5: '普通员工', 6: '其他' }\n\nconst statItems = computed(() => [\n  { label: '员工总数', value: stats.value.empCount, icon: 'el-icon-user', color1: '#409EFF', color2: '#53a8ff' },\n  { label: '部门数', value: stats.value.deptCount, icon: 'el-icon-office-building', color1: '#67C23A', color2: '#95d475' },\n  { label: '男员工', value: stats.value.maleCount, icon: 'el-icon-male', color1: '#36D1C4', color2: '#5B86E5' },\n  { label: '女员工', value: stats.value.femaleCount, icon: 'el-icon-female', color1: '#F56C6C', color2: '#fbbd61' }\n])\nconst aiInput = ref('')\nconst aiAnswer = ref('')\nconst aiLoading = ref(false)\n\nconst latestAnnouncement = ref(null)\n\nconst fetchLatestAnnouncement = async () => {\n  try {\n    const res = await axios.get('/announcement/latest')\n    if (res.data.code === 1 && res.data.data) {\n      latestAnnouncement.value = res.data.data\n    } else {\n      latestAnnouncement.value = null\n    }\n  } catch (error) {\n    console.error('获取最新公告失败:', error)\n    latestAnnouncement.value = null\n  }\n}\n\nconst handleAskAI = async () => {\n  if (!aiInput.value.trim()) return\n  aiLoading.value = true\n  aiAnswer.value = ''\n  try {\n    const res = await analyzeAttendance(aiInput.value)\n    aiAnswer.value = res.data\n  } catch (e) {\n    aiAnswer.value = 'AI分析失败，请稍后重试。'\n  } finally {\n    aiLoading.value = false\n  }\n}\nfunction formatDate(val) {\n  if (!val) return ''\n  return dayjs(val).isValid() ? dayjs(val).format('YYYY-MM-DD') : val\n}\n\nfunction formatEmpId(id) {\n  return id ? id.toString().padStart(9, '0') : ''\n}\n\nfunction renderDeptChart() {\n  const myChart = echarts.init(deptChart.value)\n  myChart.setOption({\n    title: { text: '各部门人数分布', left: 'center', textStyle: { color: '#409EFF', fontSize: 18 } },\n    tooltip: {},\n    xAxis: {\n      type: 'category',\n      data: deptCounts.value.map(item => item.deptName)\n    },\n    yAxis: { type: 'value' },\n    series: [{\n      data: deptCounts.value.map(item => item.count),\n      type: 'bar',\n      barWidth: '50%',\n      itemStyle: { color: '#409EFF' }\n    }]\n  })\n}\n\nfunction renderGenderChart() {\n  const myChart = echarts.init(genderChart.value)\n  myChart.setOption({\n    title: { text: '男女比例', left: 'center', textStyle: { color: '#409EFF', fontSize: 18 } },\n    tooltip: { trigger: 'item' },\n    legend: { bottom: 10, left: 'center' },\n    series: [{\n      name: '性别',\n      type: 'pie',\n      radius: '50%',\n      data: genderRatio.value,\n      label: { formatter: '{b}: {c} ({d}%)' }\n    }]\n  })\n}\n\nconst goToAddEmp = () => router.push('/emp')\nconst goToDept = () => router.push('/dept')\nconst goToAttendance = () => router.push('/attendance')\nconst goToProfile = () => router.push('/profile')\nconst goToLeave = () => router.push('/leave')\n\nonMounted(async () => {\n  const userRes = await axios.get('/emps/profile')\n  if (userRes.data.code === 1) {\n    userInfo.value = {\n      name: userRes.data.data.name,\n      avatar: userRes.data.data.image,\n      job: userRes.data.data.job\n    }\n  }\n  const res = await axios.get('/emps/stats')\n  if (res.data.code === 1) {\n    stats.value.empCount = res.data.data.empCount\n    stats.value.deptCount = res.data.data.deptCount\n    stats.value.maleCount = res.data.data.maleCount\n    stats.value.femaleCount = res.data.data.femaleCount\n    latestEmps.value = res.data.data.latestEmps\n    deptCounts.value = res.data.data.deptCounts\n    genderRatio.value = [\n      { value: res.data.data.maleCount, name: '男' },\n      { value: res.data.data.femaleCount, name: '女' }\n    ]\n    // 渲染图表\n    renderDeptChart()\n    renderGenderChart()\n  }\n  fetchLatestAnnouncement()\n})\n</script>\n\n<style scoped>\n.home-container {\n  padding: 30px;\n  background: #f7f7f7;\n  min-height: 100vh;\n}\n.welcome-card {\n  background: linear-gradient(135deg, #e0eafc 60%, #cfdef3 100%);\n  color: #222;\n  border: none;\n  box-shadow: 0 4px 24px rgba(0,0,0,0.08);\n  border-radius: 16px;\n}\n.avatar-card {\n  background: linear-gradient(135deg, #f3e7e9 60%, #e3eeff 100%);\n  border: none;\n  box-shadow: 0 4px 24px rgba(0,0,0,0.08);\n  border-radius: 16px;\n}\n.welcome-card h2 {\n  font-size: 18px;\n  margin-bottom: 6px;\n}\n.welcome-card p {\n  font-size: 14px;\n  margin-bottom: 0;\n}\n.avatar-card .el-avatar {\n  width: 60px !important;\n  height: 60px !important;\n}\n.avatar-card div {\n  font-size: 16px !important;\n}\n.stat-block {\n  min-height: 70px !important;\n  padding: 10px 0 !important;\n  font-size: 15px !important;\n}\n.el-card[style*=\"background:linear-gradient\"] {\n  min-height: 70px !important;\n  padding: 10px 0 !important;\n  font-size: 15px !important;\n}\n.dept-chart, .gender-chart {\n  height: 220px !important;\n  min-height: 200px !important;\n  max-height: 240px !important;\n}\nul {\n  padding-left: 20px;\n  margin: 0;\n}\nli {\n  line-height: 1.8;\n}\n.el-button {\n  font-size: 13px !important;\n  padding: 4px 14px !important;\n  border-radius: 14px !important;\n}\n.ai-card {\n  max-width: 800px;\n  margin: 0 auto;\n}\n.ai-answer {\n  background: #f6f8fa;\n  border-radius: 8px;\n  padding: 16px;\n  color: #222;\n  font-size: 16px;\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}