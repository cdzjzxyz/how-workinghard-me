{"ast":null,"code":"import { ref, onMounted } from 'vue';\nimport { ElMessage } from 'element-plus';\nimport axios from 'axios';\nimport { Check } from '@element-plus/icons-vue';\nexport default {\n  __name: 'Leave',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const form = ref({\n      range: [],\n      reason: ''\n    });\n    const leaveList = ref([]);\n    const loading = ref(false);\n    const applyLeave = async () => {\n      if (!form.value.range.length) {\n        ElMessage.warning('请选择请假时间');\n        return;\n      }\n      if (!form.value.reason.trim()) {\n        ElMessage.warning('请填写请假原因');\n        return;\n      }\n      try {\n        await axios.post('/leave/apply', {\n          startDate: form.value.range[0],\n          endDate: form.value.range[1],\n          reason: form.value.reason\n        });\n        ElMessage.success('申请已提交');\n        form.value.range = [];\n        form.value.reason = '';\n        getMyLeaves();\n      } catch (error) {\n        ElMessage.error('提交失败，请重试');\n      }\n    };\n    const getMyLeaves = async () => {\n      loading.value = true;\n      try {\n        const {\n          data\n        } = await axios.get('/leave/my');\n        leaveList.value = data.data;\n      } finally {\n        loading.value = false;\n      }\n    };\n    const getStatusType = status => {\n      switch (status) {\n        case 0:\n          return 'warning';\n        case 1:\n          return 'success';\n        case 2:\n          return 'danger';\n        default:\n          return 'info';\n      }\n    };\n    const getStatusText = status => {\n      switch (status) {\n        case 0:\n          return '待审批';\n        case 1:\n          return '已通过';\n        case 2:\n          return '已拒绝';\n        default:\n          return '未知';\n      }\n    };\n    onMounted(getMyLeaves);\n    const __returned__ = {\n      form,\n      leaveList,\n      loading,\n      applyLeave,\n      getMyLeaves,\n      getStatusType,\n      getStatusText,\n      ref,\n      onMounted,\n      get ElMessage() {\n        return ElMessage;\n      },\n      get axios() {\n        return axios;\n      },\n      get Check() {\n        return Check;\n      }\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ref","onMounted","ElMessage","axios","Check","form","range","reason","leaveList","loading","applyLeave","value","length","warning","trim","post","startDate","endDate","success","getMyLeaves","error","data","get","getStatusType","status","getStatusText"],"sources":["D:/web_code/zxyf/test_vue/src/components/Leave.vue"],"sourcesContent":["<!-- eslint-disable vue/multi-word-component-names -->\n<template>\n  <div class=\"leave-container\">\n    <el-card class=\"leave-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <span class=\"header-title\">请假申请</span>\n          <div class=\"header-desc\">请填写以下信息提交请假申请</div>\n        </div>\n      </template>\n      \n      <el-form :model=\"form\" class=\"leave-form\" label-position=\"top\">\n        <el-form-item label=\"请假时间\" class=\"form-item\">\n          <el-date-picker\n            v-model=\"form.range\"\n            type=\"daterange\"\n            range-separator=\"至\"\n            start-placeholder=\"开始日期\"\n            end-placeholder=\"结束日期\"\n            value-format=\"YYYY-MM-DD\"\n            class=\"date-picker\"\n          />\n        </el-form-item>\n        <el-form-item label=\"请假原因\" class=\"form-item\">\n          <el-input\n            v-model=\"form.reason\"\n            type=\"textarea\"\n            :rows=\"4\"\n            placeholder=\"请详细说明请假原因...\"\n            class=\"reason-input\"\n          />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"applyLeave\" class=\"submit-btn\">\n            <el-icon><Check /></el-icon>提交申请\n          </el-button>\n        </el-form-item>\n      </el-form>\n    </el-card>\n\n    <el-card class=\"leave-history-card\">\n      <template #header>\n        <div class=\"card-header\">\n          <span class=\"header-title\">请假记录</span>\n          <div class=\"header-desc\">查看您的请假申请历史</div>\n        </div>\n      </template>\n\n      <el-table :data=\"leaveList\" style=\"width: 100%\" v-loading=\"loading\">\n        <el-table-column prop=\"startDate\" label=\"开始日期\" width=\"120\" />\n        <el-table-column prop=\"endDate\" label=\"结束日期\" width=\"120\" />\n        <el-table-column prop=\"reason\" label=\"请假原因\" show-overflow-tooltip />\n        <el-table-column prop=\"status\" label=\"状态\" width=\"100\">\n          <template #default=\"scope\">\n            <el-tag :type=\"getStatusType(scope.row.status)\" effect=\"light\">\n              {{ getStatusText(scope.row.status) }}\n            </el-tag>\n          </template>\n        </el-table-column>\n      </el-table>\n    </el-card>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted } from 'vue'\nimport { ElMessage } from 'element-plus'\nimport axios from 'axios'\nimport { Check } from '@element-plus/icons-vue'\n\nconst form = ref({ range: [], reason: '' })\nconst leaveList = ref([])\nconst loading = ref(false)\n\nconst applyLeave = async () => {\n  if (!form.value.range.length) {\n    ElMessage.warning('请选择请假时间')\n    return\n  }\n  if (!form.value.reason.trim()) {\n    ElMessage.warning('请填写请假原因')\n    return\n  }\n  \n  try {\n    await axios.post('/leave/apply', {\n      startDate: form.value.range[0],\n      endDate: form.value.range[1],\n      reason: form.value.reason\n    })\n    ElMessage.success('申请已提交')\n    form.value.range = []\n    form.value.reason = ''\n    getMyLeaves()\n  } catch (error) {\n    ElMessage.error('提交失败，请重试')\n  }\n}\n\nconst getMyLeaves = async () => {\n  loading.value = true\n  try {\n    const { data } = await axios.get('/leave/my')\n    leaveList.value = data.data\n  } finally {\n    loading.value = false\n  }\n}\n\nconst getStatusType = (status) => {\n  switch (status) {\n    case 0: return 'warning'\n    case 1: return 'success'\n    case 2: return 'danger'\n    default: return 'info'\n  }\n}\n\nconst getStatusText = (status) => {\n  switch (status) {\n    case 0: return '待审批'\n    case 1: return '已通过'\n    case 2: return '已拒绝'\n    default: return '未知'\n  }\n}\n\nonMounted(getMyLeaves)\n</script>\n\n<style scoped>\n.leave-container {\n  display: flex;\n  flex-direction: column;\n  gap: 24px;\n}\n\n.leave-card, .leave-history-card {\n  border-radius: 16px;\n  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);\n  transition: all 0.3s ease;\n}\n\n.leave-card:hover, .leave-history-card:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 6px 24px rgba(0, 0, 0, 0.08);\n}\n\n.card-header {\n  display: flex;\n  flex-direction: column;\n  gap: 8px;\n}\n\n.header-title {\n  font-size: 20px;\n  font-weight: bold;\n  color: #409EFF;\n}\n\n.header-desc {\n  font-size: 14px;\n  color: #909399;\n}\n\n.leave-form {\n  max-width: 600px;\n  margin: 0 auto;\n}\n\n.form-item {\n  margin-bottom: 24px;\n}\n\n.date-picker {\n  width: 100%;\n}\n\n.reason-input {\n  font-size: 14px;\n}\n\n.reason-input :deep(.el-textarea__inner) {\n  border-radius: 8px;\n  padding: 12px;\n  font-size: 14px;\n  line-height: 1.6;\n  transition: all 0.3s ease;\n}\n\n.reason-input :deep(.el-textarea__inner:focus) {\n  box-shadow: 0 0 0 2px rgba(64, 158, 255, 0.2);\n}\n\n.submit-btn {\n  width: 100%;\n  height: 44px;\n  font-size: 16px;\n  font-weight: bold;\n  border-radius: 22px;\n  background: linear-gradient(135deg, #409EFF 0%, #36D1DC 100%);\n  border: none;\n  transition: all 0.3s ease;\n}\n\n.submit-btn:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 12px rgba(64, 158, 255, 0.3);\n}\n\n.submit-btn :deep(.el-icon) {\n  margin-right: 8px;\n}\n\n:deep(.el-table) {\n  border-radius: 8px;\n  overflow: hidden;\n}\n\n:deep(.el-table th) {\n  background-color: #f5f7fa;\n  font-weight: bold;\n}\n\n:deep(.el-tag) {\n  border-radius: 4px;\n  padding: 0 12px;\n  height: 24px;\n  line-height: 24px;\n  font-weight: bold;\n}\n</style>\n"],"mappings":"AAiEA,SAASA,GAAG,EAAEC,SAAS,QAAQ,KAAI;AACnC,SAASC,SAAS,QAAQ,cAAa;AACvC,OAAOC,KAAK,MAAM,OAAM;AACxB,SAASC,KAAK,QAAQ,yBAAwB;;;;;;;IAE9C,MAAMC,IAAI,GAAGL,GAAG,CAAC;MAAEM,KAAK,EAAE,EAAE;MAAEC,MAAM,EAAE;IAAG,CAAC;IAC1C,MAAMC,SAAS,GAAGR,GAAG,CAAC,EAAE;IACxB,MAAMS,OAAO,GAAGT,GAAG,CAAC,KAAK;IAEzB,MAAMU,UAAU,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI,CAACL,IAAI,CAACM,KAAK,CAACL,KAAK,CAACM,MAAM,EAAE;QAC5BV,SAAS,CAACW,OAAO,CAAC,SAAS;QAC3B;MACF;MACA,IAAI,CAACR,IAAI,CAACM,KAAK,CAACJ,MAAM,CAACO,IAAI,CAAC,CAAC,EAAE;QAC7BZ,SAAS,CAACW,OAAO,CAAC,SAAS;QAC3B;MACF;MAEA,IAAI;QACF,MAAMV,KAAK,CAACY,IAAI,CAAC,cAAc,EAAE;UAC/BC,SAAS,EAAEX,IAAI,CAACM,KAAK,CAACL,KAAK,CAAC,CAAC,CAAC;UAC9BW,OAAO,EAAEZ,IAAI,CAACM,KAAK,CAACL,KAAK,CAAC,CAAC,CAAC;UAC5BC,MAAM,EAAEF,IAAI,CAACM,KAAK,CAACJ;QACrB,CAAC;QACDL,SAAS,CAACgB,OAAO,CAAC,OAAO;QACzBb,IAAI,CAACM,KAAK,CAACL,KAAK,GAAG,EAAC;QACpBD,IAAI,CAACM,KAAK,CAACJ,MAAM,GAAG,EAAC;QACrBY,WAAW,CAAC;MACd,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdlB,SAAS,CAACkB,KAAK,CAAC,UAAU;MAC5B;IACF;IAEA,MAAMD,WAAW,GAAG,MAAAA,CAAA,KAAY;MAC9BV,OAAO,CAACE,KAAK,GAAG,IAAG;MACnB,IAAI;QACF,MAAM;UAAEU;QAAK,CAAC,GAAG,MAAMlB,KAAK,CAACmB,GAAG,CAAC,WAAW;QAC5Cd,SAAS,CAACG,KAAK,GAAGU,IAAI,CAACA,IAAG;MAC5B,CAAC,SAAS;QACRZ,OAAO,CAACE,KAAK,GAAG,KAAI;MACtB;IACF;IAEA,MAAMY,aAAa,GAAIC,MAAM,IAAK;MAChC,QAAQA,MAAM;QACZ,KAAK,CAAC;UAAE,OAAO,SAAQ;QACvB,KAAK,CAAC;UAAE,OAAO,SAAQ;QACvB,KAAK,CAAC;UAAE,OAAO,QAAO;QACtB;UAAS,OAAO,MAAK;MACvB;IACF;IAEA,MAAMC,aAAa,GAAID,MAAM,IAAK;MAChC,QAAQA,MAAM;QACZ,KAAK,CAAC;UAAE,OAAO,KAAI;QACnB,KAAK,CAAC;UAAE,OAAO,KAAI;QACnB,KAAK,CAAC;UAAE,OAAO,KAAI;QACnB;UAAS,OAAO,IAAG;MACrB;IACF;IAEAvB,SAAS,CAACkB,WAAW","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}